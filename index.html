<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>ECharts</title>
    <script src="echarts/dist/echarts.js"></script>
</head>
<body>
	<h1 align="center">温度监控</h1>
	<hr/>
	<div stype="width: 100%;height:100%;">
		<div id="tem_p" style="width: 50%;height:400px;float:left"></div>
		<div id="hum_p" style="width: 50%;height:400px;float:left"></div>
	</div>
	<div id="main" stype="width: 100%;height:100%;">
    	<div id="tem" style="width: 50%;height:400px;float:left"></div>
    	<div id="hum" style="width: 50%;height:400px;float:right"></div>
	</div>
	<hr/>
	<div style="text-align: center; width: 100%;">
		<img alt="" src="http://www.onjobs.com.cn/xiaohui/20120531193458966.gif" style="margin: 0 auto;" />
	</div>
	<p align="center">制作人：姜伟，顾研文，宫晓阳</p>
	<script type="text/javascript">
		var dom_pt = document.getElementById("tem_p");
		var myChart_pt = echarts.init(dom_pt);
		var app = {};
		option_pt = null;
		option_pt = {
		    tooltip : {
		        formatter: "{a} <br/>{b} : {c}%"
		    },
		    series: [
		        {
		            name: 'tem',
		            type: 'gauge',
		            detail: {formatter:'{value}'},
		            data: [{value: 27, name: '温度/摄氏度'}]
		        }
		    ]
		};

		setInterval(function () {
		    option_pt.series[0].data[0].value = (Math.random() * 100).toFixed(2) - 0;
		    myChart_pt.setOption(option_pt, true);
		},2000);
		;
		if (option_pt && typeof option_pt === "object") {
		    myChart_pt.setOption(option_pt, true);
		}
    </script>
    <script type="text/javascript">
		var dom_ph = document.getElementById("hum_p");
		var myChart_ph = echarts.init(dom_ph);
		var app = {};
		option_ph = null;
		option_ph = {
		    tooltip : {
		        formatter: "{a} <br/>{b} : {c}%"
		    },
		    series: [
		        {
		            name: 'tem',
		            type: 'gauge',
		            detail: {formatter:'{value}%'},
		            data: [{value: 27, name: '湿度/%'}]
		        }
		    ]
		};

		setInterval(function () {
		    option_ph.series[0].data[0].value = (Math.random() * 100).toFixed(2) - 0;
		    myChart_ph.setOption(option_ph, true);
		},2000);
		;
		if (option_ph && typeof option_ph === "object") {
		    myChart_ph.setOption(option_ph, true);
		}
    </script>
    <script type="text/javascript">
        var dom_t = document.getElementById("tem");
		var myChart_t = echarts.init(dom_t);
		var app = {};
		option_t = null;
		var base = +new Date(2016 , 9, 3);
		var oneDay = 24 * 3600 * 1000;
		var date = [];

		var data = [Math.random() * 150];
		var now = new Date(base);

		function addData(shift) {
		    now = [now.getFullYear(), now.getMonth() + 1, now.getDate()].join('/');
		    date.push(now);
		    data.push((Math.random() - 0.4) * 10 + data[data.length - 1]);

		    if (shift) {
		        date.shift();
		        data.shift();
		    }

		    now = new Date(+new Date(now) + oneDay);
		}

		for (var i = 1; i < 100; i++) {
		    addData();
		}

		option_t = {
			title:{
                text:"温度/摄氏度",
                left: 'center'
            },
		    xAxis: {
		        type: 'category',
		        boundaryGap: false,
		        data: ''
		    },
		    yAxis: {
		        boundaryGap: [0, '50%'],
		        type: 'value'
		    },
		    series: [
		        {
		            name:'tem',
		            type:'line',
		            smooth:true,
		            symbol: 'none',
		            stack: 'a',
		            areaStyle: {
		                normal: {}
		            },
		            data: data
		        }
		    ]
		};

		setInterval(function () {
		    addData(true);
		    myChart_t.setOption({
		        xAxis: {
		            data: ''
		        },
		        series: [{
		            name:'tem',
		            data: data
		        }]
		    });
		}, 500);;
		if (option_t && typeof option_t === "object") {
		    myChart_t.setOption(option_t, true);
		}
    </script>
    <script type="text/javascript">
        var dom_p = document.getElementById("hum");
		var myChart_h = echarts.init(dom_p);
		var app = {};
		option_p = null;
		var base = +new Date(2016 , 9, 3);
		var oneDay = 24 * 3600 * 1000;
		var date = [];

		var data = [Math.random() * 150];
		var now = new Date(base);

		function addData(shift) {
		    now = [now.getFullYear(), now.getMonth() + 1, now.getDate()].join('/');
		    date.push(now);
		    data.push((Math.random() - 0.4) * 10 + data[data.length - 1]);

		    if (shift) {
		        date.shift();
		        data.shift();
		    }

		    now = new Date(+new Date(now) + oneDay);
		}

		for (var i = 1; i < 100; i++) {
		    addData();
		}

		option_p = {
			title:{
                text:"湿度/%",
                left: 'center'
            },
		    xAxis: {
		        type: 'category',
		        boundaryGap: false,
		        data: ''
		    },
		    yAxis: {
		        boundaryGap: [0, '50%'],
		        type: 'value'
		    },
		    series: [
		        {
		            name:'hum',
		            type:'line',
		            smooth:true,
		            symbol: 'none',
		            stack: 'a',
		            areaStyle: {
		                normal: {}
		            },
		            data: data
		        }
		    ]
		};

		setInterval(function () {
		    addData(true);
		    myChart_h.setOption({
		        xAxis: {
		            data: ''
		        },
		        series: [{
		            name:'hum',
		            data: data
		        }]
		    });
		}, 500);;
		if (option_p && typeof option_p === "object") {
		    myChart_h.setOption(option_p, true);
		}
    </script>
</body>
</html>
